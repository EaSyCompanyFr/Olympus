{# src/Easy/SiteBundle/Resources/views/layout.html.twig #}

<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="{% set _description = block('description') %}{% if _description is not empty %}{{ _description|raw }}{% endif %}" />
        <title>=EaSy= Company - A French Multigaming Team since 2008 {% set _title = block('title') %}{% if _title is not empty %} | {{ _title|raw }}{% endif %}</title>
        <link href="{{ asset('bundles/easysite/css/bootstrap.min.css') }}" rel="stylesheet" media="screen">
        <link href="{{ asset('bundles/easysite/css/font-awesome.min.css') }}" rel="stylesheet" media="screen">
        <link href="{{ asset('bundles/easysite/css/main.css') }}" rel="stylesheet" media="screen">
        <link rel="shortcut icon" href="/bundles/easysite/images/favicon.png" />
        <script src="{{ asset('bundles/easysite/js/jquery-2.0.3.min.js') }}"></script>
        <script src="{{ asset('bundles/easysite/js/bootstrap.min.js') }}"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37507672-1', 'easy-company.fr');
            ga('send', 'pageview');
        </script>
        
        <script>
            linkLoadEtats = "{{ path('easy_ws_etats_load') }}";
        </script>
        <script src="{{ asset('bundles/easysite/js/loadEtats.js') }}"></script>
    </head>
    <body>
        <div class="container">
            <header>
                <a href="{{ path('easy_site_homepage') }}"><img src="/bundles/easysite/images/banniere_{{ random(4) }}.png" class="img-responsive" alt="=EaSy= Company"></a>
            </header>

            {% include "EasySiteBundle::menu.html.twig" %}

            <div class="row">
                <div class="col-xs-12 col-md-3">
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-calendar"></i> Evènements</h3></div>
                            {{ render(controller('EasyDispoBundle:Evenement:listAccueil')) }}
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-microphone"></i> Teamspeak</h3></div>
                        <div class="panel-body">
                            {% if not app.debug %}
                                {% include "EasySiteBundle::ts.html.twig" %}
                            {% else %}
                                TS Viewer désactivé en mode dev
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-md-6">
                    {% if app.request.attributes.get('_route') == 'easy_site_homepage' %}
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-info-circle"></i> Informations</h3></div>
                        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                            <!-- Indicators -->
                            <ol class="carousel-indicators">
                                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                            </ol>
                            <!-- Wrapper for slides -->
                            <div class="carousel-inner">
                                <div class="item active">
                                    <img src="http://www.arma3.com/images/screenshots/large/arma3_screenshot_03.jpg" alt="...">
                                    <div class="carousel-caption">
                                    Serveur Teamspeak 3
                                    </div>
                                </div>
                                <div class="item">
                                    <img src="http://www.arma3.com/images/screenshots/large/arma3_screenshot_01.jpg" alt="...">
                                    <div class="carousel-caption">
                                    Test2
                                    </div>
                                </div>
                                <div class="item">
                                    <img src="http://www.arma3.com/images/screenshots/large/arma3_screenshot_02.jpg" alt="...">
                                    <div class="carousel-caption">
                                    Serveur Minecraft DNS Techpack 6.3.0
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="panel panel-primary">
                        {% if _title is not empty %}
                            <div class="panel-heading">
                                <h1 class="panel-title">{% set _icone = block('icone') %}{% if _icone is not empty %}{{ _icone|raw }}{% endif %} {{ _title|raw }}</h1>
                            </div>
                        {% endif %}
                        <div class="panel-body">
                            {% block body %}
                                
                            {% endblock %}
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-md-3">
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-user"></i> {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}Connecté{% else %}Connexion{% endif %}</h3></div>
                        <div class="panel-body">
                            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                                <div class="text-center">
                                    <strong>{{ app.user.username }}</strong>
                                    <br />
                                    <img src="{{ gravatar(app.user.email, 100) }}">
                                    <br /><br />
                                    <a href="{{ path('fos_user_security_logout') }}" class="btn btn-danger">Se déconnecter <i class="fa fa-sign-out"></i></a>
                                </div>
                            {% else %}
                                <div class="text-center">
                                    <a href="{{ path('fos_user_security_login') }}" class="btn btn-primary"><i class="fa fa-sign-in"></i> Connexion</a>
                                    <a href="{{ path('fos_user_registration_register') }}" class="btn btn-primary"><i class="fa fa-list"></i> Inscription</a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="panel panel-primary" id="etats">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-signal"></i> Etats des Serveurs</h3></div>
                        <div class="panel-body">
                            <i class="fa fa-spinner fa-spin"></i> Chargement en cours...
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-beer"></i> Tchat</h3></div>
                        <div class="panel-body">
                            {% if not app.debug %}
                                {% include "EasySiteBundle::tchat.html.twig" %}
                            {% else %}
                                Tchat désactivé en mode dev
                            {% endif %}
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-link"></i> Liens</h3></div>
                        <div class="panel-body">
                            {% include "EasySiteBundle::liens.html.twig" %}
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading"><h3 class="panel-title"><i class="fa fa-users"></i> Nos Partenaires</h3></div>
                        <div class="panel-body">
                            {% include "EasySiteBundle::partenaires.html.twig" %}
                        </div>
                    </div>
                </div>
            </div>
            <footer>
                =EaSy= Company &copy; 2008 - {{ "now"|date('Y') }} - <a href="{{ path('easy_site_page_mentions') }}">Mentions Légales</a>
            </footer>
        </div>

        <script>
        $(function() {
            // Affichage des tooltips
            $('[data-toggle="tooltip"]').tooltip();

            // Tooltip des statuts des serveurs
            $('.tooltip-state').tooltip({
                html: true,
                placement: 'left',
                title: function() {
                    return $(this).attr('data-tooltip');
                }
            });
        });
        </script>
    </body>
</html>
